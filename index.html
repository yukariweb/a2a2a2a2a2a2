<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport"
  content="width=device-width,
           initial-scale=1.0,
           user-scalable=no,
           viewport-fit=cover" />
<title>360° Virtual Tour</title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    background: #000;
    font-family: sans-serif;
    touch-action: none;
  }

  /* =========
     iOS12〜対応のための保険余白
     ========= */
  body {
    padding-bottom: 110px; /* フォールバック */
    padding-bottom: calc(110px + env(safe-area-inset-bottom));
  }

  /* =========
     pano wrapper（最重要）
     ========= */
  #panoWrapper {
    position: relative;
    width: 100vw;

    /* iOS12 フォールバック */
    height: 100vh;

    /* iOS13+ / モダンブラウザ */
    height: 100dvh;

    overflow: hidden;
    background: #000;
  }

  #pano {
    width: 100%;
    height: 100%;
  }

  /* =========
     上部：シーン名バー
     ========= */
  #topBar {
    position: fixed;
    top: 12px; /* フォールバック */
    top: calc(12px + env(safe-area-inset-top));
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;

    max-width: calc(100% - 24px);
    padding: 8px 12px;
    border-radius: 999px;
    background: rgba(0,0,0,0.45);
    color: #fff;
    font-size: 14px;
    font-weight: 700;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    pointer-events: none;
  }

  /* =========
     下部：順路ナビ（主役UI）
     ========= */
  #bottomNav {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;

    display: flex;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 999px;
    background: rgba(0,0,0,0.55);

    /* フォールバック（iOS12） */
    bottom: 24px;

    /* iOS13+ */
    bottom: calc(24px + env(safe-area-inset-bottom));
  }

  /* iOS Safari 専用の最終保険 */
  @supports (-webkit-touch-callout: none) {
    #bottomNav {
      bottom: calc(40px + env(safe-area-inset-bottom));
    }
  }

  .navBtn {
    background: #fff;
    color: #222;
    border: none;
    border-radius: 999px;
    padding: 10px 14px;
    font-size: 14px;
    font-weight: 800;
    cursor: pointer;
  }

  .navBtn:active {
    transform: scale(0.97);
  }

  .navBtn:disabled {
    opacity: 0.45;
    cursor: default;
  }

  .navLabel {
    display: inline-block;
    max-width: 130px;
    vertical-align: bottom;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
</style>
</head>

<body>

<div id="panoWrapper">
  <div id="pano"></div>

  <!-- シーン名 -->
  <div id="topBar">
    <span id="sceneTitle">読み込み中…</span>
  </div>

  <!-- 順路ナビ -->
  <div id="bottomNav">
    <button id="btnPrev" class="navBtn">
      ◀ <span id="prevLabel" class="navLabel">前へ</span>
    </button>
    <button id="btnNext" class="navBtn">
      <span id="nextLabel" class="navLabel">次へ</span> ▶
    </button>
  </div>
</div>

<!-- Marzipano -->
<script src="./libs/marzipano.js"></script>

<!-- Runtime -->
<script src="./tour.js"></script>

</body>
</html>
